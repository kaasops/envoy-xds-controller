apiVersion: envoy.kaasops.io/v1alpha1
kind: VirtualServiceTemplate
metadata:
  name: test-empty-enum-extrafield
spec:
  listener:
    name: https
  accessLogConfig:
    name: access-log-config
  tlsConfig:
    autoDiscovery: true
  virtualHost:
    request_headers_to_add:
      - append_action: OVERWRITE_IF_EXISTS_OR_ADD
        header:
          key: X-API-Version
          value: "{{ .ApiVersion }}"
    routes:
      - match:
          prefix: "/{{ .ApiVersion }}/{{ .ServicePath }}"
        route:
          cluster: "{{ .ServiceName }}"
  extraFields:
    - name: ServiceName
      type: string
      description: "The name of the service cluster"
      required: true
    - name: ServicePath
      type: string
      description: "The path segment for the service"
      required: true
    - name: ApiVersion
      type: string
      description: "API version (v1, v2, etc.)"
      required: true
      default: "v1"
    - name: EmptyEnumField
      type: enum
      description: "This field is an enum but has no enum values"
      required: false
      enum: []